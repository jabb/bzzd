<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>libdrunkard by jabb</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>libdrunkard</h1>
        <p>Drunkard's Walk 2D Map Generator</p>

        <p class="view"><a href="https://github.com/jabb/libdrunkard">View the Project on GitHub <small>jabb/libdrunkard</small></a></p>


        <ul>
          <li><a href="https://github.com/jabb/libdrunkard/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jabb/libdrunkard/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/jabb/libdrunkard">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>A Drunk Introduction</h3>

<p>If you're looking to procedurally generate 2D maps, libdrunkard may be what you're looking for. This library uses a fine tuned drunkard's walk alogirithm (see: <a href="http://en.wikipedia.org/wiki/Random_walk">http://en.wikipedia.org/wiki/Random_walk</a>). Basically, you'll have a walker (or a drunk, as this library calls it) who walks around the map carving tunnels and various other structures.</p>

<p>Here's a good example of what you can create (quite simply too!):</p>

<p><img src="http://dl.dropbox.com/u/11665683/drunkard1.png" alt="libdrunkard"></p>

<h3>Compiling Drunkard</h3>

<p>On most systems, you can simply do <code>make &amp;&amp; make install</code> to get the library working on your computer. The library itself is very small, 57kb with debugging enabled.</p>

<p>If the libdrunkard fails to compile on your system, feel free to contact me at my GitHub: <a href="https://github.com/jabb" class="user-mention">@jabb</a>.</p>

<h3>Using Drunkard</h3>

<p>In order to use libdrunkard, all you need to do is include the header file <code>&lt;dunkard.h&gt;</code> and link against the library by passing <code>-ldrunkard</code> to GCC, or some other compiler. After that you need to have your map already defined and then you can create your drunk. The map needs to be an array or multidimensional array of unsigned numbers, if multidimensional, height must be indexed first, like below:</p>

<pre><code>unsigned map[MAP_HEIGHT][MAP_WIDTH] = {{0}};
/* Create the drunk. */
struct drunkard *drunk = drunkard_create((void *)map, MAP_WIDTH, MAP_HEIGHT);

/* Carve out a random map. */
/* ... */

/* Destroy the drunk. */
drunkard_destroy(drunk);
</code></pre>

<p>Some technical notes:</p>

<ul>
<li>libdrunkard uses it's own custom random number generator (CMWC) which is seeded automatically. You can get the current seed with <code>drunkard_get_seed</code> and set it manually with <code>drunkard_seed</code>.</li>
<li>libdrunkard recognizes numbers passing a certain threshold as open (walkable) tiles. This threshold can be set manually with <code>drunkard_set_opened_threshold</code>. The default is 1, so only a tile that has the value of 0 can't be walked upon.</li>
<li>libdrunkard keeps a list of tiles that have been opened and tiles that might be opened after a flush, the latter are called marks. "Marking" tiles is the preferable way to set tiles during a carving process, that way any tiles that open up don't confuse the drunkard thinking he's found the main tunnel system. There are various marking functions, but only one way to flush them: <code>drunkard_flush_marks</code>. Flush only when you're absolutely sure you've connected with the rest of your walkable area, or you know you can get back to the disconnected area.</li>
<li>libdrunkard's marks tiles only relative to the current position and target of the drunk. When you're carving, at some point you should <strong>always</strong> target a random open tile and head towards it. There are always exceptions of course, but this is a good rule so you can be sure your drunk connects to a walkable area.</li>
<li>libdrunkard's main stepping function uses a weight to calculate how stumbly the drunk will be. The weight is on a scale from 0.0 to 1.0. A value of 0.0 means the drunk will move directly away from his target, a value of 1.0 will mean directory towards, and a value of 0.5 means he'll just randomly walk around. I like values between 0.6 and 0.9 to be sure the drunk reaches his target.</li>
</ul><h3>Function Documentation</h3>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jabb">jabb</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>